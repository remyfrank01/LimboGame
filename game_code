from cmu_112_graphics import *
from tkinter import *
import random
import json
import requests

#This program makes use of code from the 15-112 webiste to be able to run the animations.
#Source: https://www.cs.cmu.edu/~112/notes/notes-animations-part1.html




#This class creates a graphical user interface to allow the player(s) to enter a team name
#and then checks that team name with existing team names stored in a jstor file online.
#The use of GUI and some of this code is inspired by: https://www.youtube.com/watch?v=RTM9tiV_HoY
#(mainly for syntax purposes since I don't know the syntax for making a GUI in Python)
class LoginInfo(object):
    teamName = ''
    proceed = True
    
    def __init__(self):
        self.login = Tk()
        self.login.geometry('700x500')

        self.teamName = ''

        self.canvas = Canvas(self.login, bg = 'black', width = 700, height = 500)
        self.canvas.pack(fill = 'both', expand = True)

        self.label = Label(self.canvas, text = 'Enter Team Name:', font = 'System', fg = 'black')
        self.label.pack(side = LEFT, expand = True)

        self.nameEntry = Entry(self.canvas, bd = 6, font = 'System')
        self.nameEntry.pack(side = RIGHT, expand = True)

        self.enter = Button(self.canvas, text = 'Enter', command = self.quit)
        self.enter.pack(side = RIGHT)

        self.login.protocol("WM_DELETE_WINDOW", self.exitFrame)

        self.login.mainloop()

    def quit(self):
        listOfChars = []
        LoginInfo.teamName = self.nameEntry.get()
        for i in range(len(LoginInfo.teamName)):
            listOfChars += LoginInfo.teamName[i]
        if(len(listOfChars) == 1):
            self.noName = Label(self.canvas, text = 'Not a valid name', font = 'System', fg = 'red')
            self.noName.pack(side = BOTTOM)
        elif(type(LoginInfo.teamName) == str):
            Team(LoginInfo.teamName)
            self.login.destroy()
        else:
            self.errorLabel = Label(self.canvas, text = 'That name has been taken', font = 'System', fg = 'red')
            self.errorLabel.pack(side = BOTTOM)
    
    def exitFrame(self):
        LoginInfo.proceed = False
        self.login.destroy()

class Team(object):
    teamNames = ''

    def __init__(self, teamName):
        self.teamName = teamName
        Team.teamNames = self.teamName

class Player(object):
    teamName = ''
    players = []
    hp = 100
    speed = 11
    lives = 3
    cyChangeRate = 10

    def __init__(self, cx, cy, color):
        self.cx = cx
        self.cy = cy
        self.color = color
        Player.players += [(self.cx, self.cy, self.color)]

class Enemy(object):
    enemies = []
    speed = 5
    cyChangeRate = 10
    jumpCount = 0

    def __init__(self, cx, cy, enemyWalkCount = 0, facingRight = True, hp = 16):
        self.cx = cx
        self.cy = cy
        self.enemyWalkCount = enemyWalkCount
        self.isFacingRight = facingRight
        self.hp = hp
        Enemy.enemies += [[self.cx, self.cy, self.enemyWalkCount, self.isFacingRight, self.hp, Enemy.jumpCount]]


class Wall(object):
    def __init__(self, cx, cy, width, height):
        self.cx = cx
        self.cy = cy
        self.width = width
        self.height = height

class Bullet(object):
    bullets = []
    cyChangeRate = .3

    def __init__(self, cx, cy, color, speed):
        self.cx = cx
        self.cy = cy
        self.color = color
        self.speed = speed
        Bullet.bullets += [[self.cx, self.cy, self.color, self.speed]]

class Bird(object):
    def __init__(self, cx, cy, changeX):
        self.cx = cx
        self.cy = random.randrange(50, 200)
        self.changeX = changeX

class Score(object):
    score = 0

class dataCollection(object):
    jumpDistances = []
    #This value for average is an estimated assumption of the distance a player will jump from the enemy
    #It is highly innacurate at first so the enemy will get progressively harder the more the game is played
    average = 200

    def __init__(self, jumpDistance):
        self.jumpDistance = jumpDistance
        dataCollection.jumpDistances += [self.jumpDistance]
        self.total = sum(dataCollection.jumpDistances)
        dataCollection.average = self.total / len(dataCollection.jumpDistances)

class TutorialMode(Mode):
    def appStarted(mode):
        TitleScreenMode.scoresViewable = True
        mode.playerNum = len(Player.players)
        mode.enemiesNum = len(Enemy.enemies)

        mode.playersRemaining = 1
        if(mode.playerNum == 2):
            mode.playersRemaining = 2

        mode.oneIsFacingRight = True
        mode.twoIsFacingRight = True

        mode.oneIsDead = False
        if(mode.playerNum == 2):
            mode.twoIsDead = False

        #Enemies
        mode.enemies = []
        mode.streak = 0
        mode.onStreak = False
        mode.enemiesKilled = 0
        mode.score = 0

        #Player 1
        mode.playerOneCx = Player.players[0][0]
        mode.playerOneCy = Player.players[0][1]
        mode.playerOneHp = Player.hp
        mode.playerOneVel = Player.speed
        mode.playerOneLives = Player.lives
        mode.playerOneDy = Player.cyChangeRate
        mode.playerOneJumpCount = 0
        mode.oneIsJumping = False

        #Player 2
        if(mode.playerNum > 1):
            mode.playerTwoCx = Player.players[1][0]
            mode.playerTwoCy = Player.players[1][1]
            mode.playerTwoHp = Player.hp
            mode.playerTwoVel = Player.speed
            mode.playerTwoLives = Player.lives
            mode.playerTwoDy = Player.cyChangeRate
            mode.playerTwoJumpCount = 0
            mode.twoIsJumping = False

        mode.gameWon = False
        mode.isGameOver = False
        mode.isPaused = False
        mode.scrollY = 0
        mode.scrollX = 0
        mode.walls = []
        mode.walkCountOne = 0
        mode.walkCountTwo = 0
        mode.rightKeyIsPressed = False
        mode.dKeyIsPressed = False
        mode.leftKeyIsPressed = False
        mode.aKeyIsPressed = False

        #Standing Animations(left and right)
        mode.stationaryAnimationRight = [mode.scaleImage(mode.loadImage('Stationary.png'), .3),
            mode.scaleImage(mode.loadImage('walk1.png'), .3)]
        mode.stationaryAnimationLeft = [mode.scaleImage(mode.loadImage('StationaryLeft.png'), .3),
            mode.scaleImage(mode.loadImage('walkLeft1.png'), .3)]

        #Right facing animations
        mode.walkingRightAnimation = [mode.scaleImage(mode.loadImage('walk2.png'), .3),
                mode.scaleImage(mode.loadImage('walk3.png'), .3),
                mode.scaleImage(mode.loadImage('walk4.png'), .3),
                mode.scaleImage(mode.loadImage('walk5.png'), .3),
                mode.scaleImage(mode.loadImage('walk6.png'), .3),
                mode.scaleImage(mode.loadImage('walk7.png'), .3),
                mode.scaleImage(mode.loadImage('walk8.png'), .3)]
        
        #Left facing animations
        mode.walkingLeftAnimation = [mode.scaleImage(mode.loadImage('walkLeft2.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft3.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft4.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft5.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft6.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft7.png'), .3),
                mode.scaleImage(mode.loadImage('walkLeft8.png'), .3)]
        
        #Enemy stationary animation
        mode.enemyStationaryAnimationRight = mode.scaleImage(mode.loadImage('enemyStationaryRight.png'), .4)
        mode.enemyStationaryAnimationLeft = mode.scaleImage(mode.loadImage('enemyStationaryLeft.png'), .4)
        
        #Enemy right moving animations
        mode.enemyWalkingRightAnimation = [mode.scaleImage(mode.loadImage('enemyRight1.png'), .4),
                mode.scaleImage(mode.loadImage('enemyRight2.png'), .4),
                mode.scaleImage(mode.loadImage('enemyRight3.png'), .4),
                mode.scaleImage(mode.loadImage('enemyRight4.png'), .4)]
        
        #Enemy left moving animations
        mode.enemyWalkingLeftAnimation = [mode.scaleImage(mode.loadImage('enemyLeft1.png'), .4),
                mode.scaleImage(mode.loadImage('enemyLeft2.png'), .4),
                mode.scaleImage(mode.loadImage('enemyLeft3.png'), .4),
                mode.scaleImage(mode.loadImage('enemyLeft4.png'), .4)]
        
        mode.currEnemyModel = mode.enemyStationaryAnimationRight
        
        mode.backgroundImage = mode.scaleImage(mode.loadImage('cityScape.png'), 2)
        
        mode.currPlayerOneModel = mode.stationaryAnimationRight[0]
        mode.createBird = False
        mode.birdFlying = [mode.scaleImage(mode.loadImage('BirdUp.png'), .3), 
            mode.scaleImage(mode.loadImage('BirdNull.png'), .3),
            mode.scaleImage(mode.loadImage('BirdDown.png'), .3)]
        mode.birds = []
        mode.birdPosition = 0

        mode.bulletRadius = 2
        mode.oneCanShoot = True
        mode.twoCanShoot = False
        mode.spaceClicks = 0
        mode.tabClicks = 0

        if(mode.playerNum == 1):
            mode.playerOneColor = Player.players[0][2]
        else:
            mode.playerOneColor = Player.players[0][2]
            mode.playerTwoColor = Player.players[1][2]
            mode.currPlayerTwoModel = mode.stationaryAnimationRight[0]
    
    def keyPressed(mode, event):
        if(event.key == "Up" and mode.playerOneJumpCount < 2 and mode.oneIsJumping == False and not mode.oneIsDead):
            mode.getDistanceFromEnemyOne()
            mode.playerOneCy -= 75
            mode.playerOneJumpCount += 1
            mode.oneIsJumping = True
        elif(event.key == 'w' and mode.playerNum == 2 and mode.playerTwoJumpCount < 2 and mode.twoIsJumping == False and not mode.twoIsDead):
            mode.getDistanceFromEnemyTwo()
            mode.playerTwoCy -= 75
            mode.playerTwoJumpCount += 1
            mode.twoIsJumping = True
        elif(event.key == "Right" and not mode.oneIsDead):
            #mode.playerOneCx += 10
            mode.oneIsFacingRight = True
            mode.rightKeyIsPressed = True
            mode.currPlayerModelOne = mode.stationaryAnimationRight[1]
        elif(event.key == 'Left' and not mode.oneIsDead):
            #mode.playerOneCx -= 10
            mode.oneIsFacingRight = False
            mode.leftKeyIsPressed = True
            mode.rightKeyIsPressed = False
            mode.currPlayerModelOne = mode.stationaryAnimationLeft[1]
        elif(event.key == "p"):
            mode.isPaused = True
            mode.app.setActiveMode(mode.app.pauseMode)
        elif(event.key == 'd' and mode.playerNum == 2 and not mode.twoIsDead):
            #mode.playerTwoCx += 10
            mode.twoIsFacingRight = True
            mode.dKeyIsPressed = True
            mode.currPlayerModelTwo = mode.stationaryAnimationRight[1]
        elif(event.key == 'a' and mode.playerNum == 2 and not mode.twoIsDead):
            #mode.playerTwoCx -= 10
            mode.twoIsFacingRight = False
            mode.aKeyIsPressed = True
            mode.dKeyIsPressed = False
            mode.currPlayerModelTwo = mode.stationaryAnimationLeft[1]
        
        #Shooting mechanism
        if(event.key == 'Space' and mode.oneCanShoot and not mode.oneIsDead):
            mode.spaceClicks += 1
            if(mode.spaceClicks % 2 == 0):
                if(mode.oneIsFacingRight):
                    Bullet(mode.playerOneCx, mode.playerOneCy-25, mode.playerOneColor, 12)
                else:
                    Bullet(mode.playerOneCx, mode.playerOneCy-25, mode.playerOneColor, -12)
                mode.oneCanShoot = False
        
        elif(event.key == 'Tab' and mode.playerNum == 2 and mode.twoCanShoot and not mode.twoIsDead):
            mode.tabClicks += 1
            if(mode.tabClicks % 2 == 0):
                if(mode.twoIsFacingRight):
                    Bullet(mode.playerTwoCx, mode.playerTwoCy-25, mode.playerTwoColor, 12)
                else:
                    Bullet(mode.playerTwoCx, mode.playerTwoCy-25, mode.playerTwoColor, -12)
                mode.twoCanShoot = False
        
        #Enemy Creation
        if(event.key == 'e' and mode.enemiesNum < 3):
            mode.enemiesNum += 1
            enemyCx = random.randrange(10, mode.width-10)
            Enemy(enemyCx, mode.height - 70)
    
    def keyReleased(mode, event):
        if(event.key == "Right"):
            mode.rightKeyIsPressed = False
            mode.currPlayerOneModel = mode.stationaryAnimationRight[0]
        elif(event.key == "Left"):
            mode.leftKeyIsPressed = False
            mode.currPlayerOneModel = mode.stationaryAnimationLeft[0]
        elif(event.key == 'Up'):
            mode.oneIsJumping = False

        if(event.key == 'd'):
            mode.dKeyIsPressed = False
            mode.currPlayerTwoModel = mode.stationaryAnimationRight[0]
        elif(event.key == 'a'):
            mode.aKeyIsPressed = False
            mode.currPlayerTwoModel = mode.stationaryAnimationLeft[0]
        elif(event.key == 'w'):
            mode.twoIsJumping = False
        
        if(event.key == 'Space'):
            mode.oneCanShoot = True
        if(event.key == 'Tab'):
            mode.twoCanShoot = True

    def mousePressed(mode, event):
        pass
    
    def timerFired(mode):
        if(mode.enemiesKilled == 15):
            mode.gameWon = True
        if(mode.isPaused):
            mode.isPaused = False
            return
        mode.createBird = False
        newBird = random.randrange(100)
        for bird in mode.birds:
            bird.cx -= bird.changeX
            if(bird.cx <= -25):
                mode.birds.remove(bird)
        if(newBird >= 98):
            mode.createBird = True
        
        for bullet in Bullet.bullets:
            bullet[0] += bullet[3]
            bullet[1] += Bullet.cyChangeRate
        
        #This determines enemies motion (Simple AI)
        for enemy in Enemy.enemies:
            if(enemy[4] <= 0):
                mode.enemiesNum -= 1
                mode.streak += 1
                mode.onStreak = True
                Enemy.enemies.remove(enemy)
                mode.score += (10 * mode.streak)
                mode.enemiesKilled += 1
            enemy[1] += Enemy.cyChangeRate
            enemyJumps = random.randrange(100)
            distFromOne = enemy[0] - mode.playerOneCx

            if(abs(distFromOne) < dataCollection.average+5 and abs(distFromOne) > dataCollection.average-5 and enemy[5] < 2):
                enemy[5] += 1
                enemy[1] -= 100

            distFromTwo = 0
            if(mode.playerNum > 1):
                distFromTwo = enemy[0] - mode.playerTwoCx
            if(abs(distFromTwo) < dataCollection.average+5 and abs(distFromTwo) > dataCollection.average-5 and enemy[5] < 2):
                enemy[5] += 1
                enemy[1] -= 100

            target = min(abs(distFromOne), abs(distFromTwo))
            if(mode.playerNum == 1):
                target = abs(distFromOne)

            if(target == abs(distFromOne) and distFromOne < 0):
                enemy[3] = True
                enemy[0] += Enemy.speed
                enemy[2] += 1
            elif(target == abs(distFromOne) and distFromOne > 0):
                enemy[3] = False
                enemy[0] -= Enemy.speed
                enemy[2] += 1
            elif(target == abs(distFromOne) and distFromOne == 0):
                enemy[3] = True
                mode.currEnemyModel = mode.enemyStationaryAnimationRight
            
            if(mode.playerNum > 1):
                if(target == abs(distFromTwo) and distFromTwo < 0):
                    enemy[3] = True
                    enemy[0] += Enemy.speed
                    enemy[2] += 1
                elif(target == abs(distFromTwo) and distFromTwo > 0):
                    enemy[3] = False
                    enemy[0] -= Enemy.speed
                    enemy[2] += 1
                elif(target == abs(distFromOne) and distFromOne == 0):
                    enemy[3] = False
                    mode.currEnemyModel = mode.enemyStationaryAnimationLeft


        #Walking Right
        if(mode.rightKeyIsPressed):
            mode.playerOneCx += mode.playerOneVel
            mode.walkCountOne += 1
            if(mode.walkCountOne >= 7):
                mode.walkCountOne = 1
            mode.currPlayerOneModel = mode.walkingRightAnimation[mode.walkCountOne%7]
        if(mode.dKeyIsPressed):
            mode.playerTwoCx += mode.playerTwoVel
            mode.walkCountTwo += 1
            if(mode.walkCountTwo >= 7):
                mode.walkCountTwo = 1
            mode.currPlayerTwoModel = mode.walkingRightAnimation[mode.walkCountTwo%7]
        
        #Walking Left
        if(mode.leftKeyIsPressed):
            mode.playerOneCx -= mode.playerOneVel
            mode.walkCountOne += 1
            if(mode.walkCountOne >= 7):
                mode.walkCountOne = 1
            mode.currPlayerOneModel = mode.walkingLeftAnimation[mode.walkCountOne%7]
        if(mode.aKeyIsPressed):
            mode.playerTwoCx -= mode.playerTwoVel
            mode.walkCountTwo += 1
            if(mode.walkCountTwo >= 7):
                mode.walkCountTwo = 1
            mode.currPlayerTwoModel = mode.walkingLeftAnimation[mode.walkCountTwo%7]
        
        if(mode.gameWon):
            mode.playerOneHp = 100
            mode.oneIsDead = False
            mode.playerOneLives = 3
            mode.playerOneCx = 45
            if(mode.playerNum == 2):
                mode.playerTwoLives = 3
                mode.playerTwoCx = 20
                mode.twoIsDead = False
                mode.playerTwoHp = 100
            Enemy.enemies = []
            mode.enemiesNum = 0
            mode.onStreak = False
            mode.streak = 0
            mode.gameWon = False
            mode.dictOfTeam = {Team.teamNames: mode.score}
            Score.score = mode.score
            mode.score = 0
            mode.cx = mode.width//2
            mode.cy = mode.height//2
            mode.app.setActiveMode(mode.app.winningMode)
            return
        if(mode.isGameOver):
            mode.playerOneHp = 100
            mode.oneIsDead = False
            mode.playerOneLives = 3
            mode.playerOneCx = 45
            if(mode.playerNum == 2):
                mode.playerTwoLives = 3
                mode.playerTwoCx = 20
                mode.twoIsDead = False
                mode.playerTwoHp = 100
            Enemy.enemies = []
            mode.enemiesNum = 0
            mode.onStreak = False
            mode.streak = 0
            mode.isGameOver = False
            Score.score = mode.score
            mode.score = 0
            mode.cx = mode.width//2
            mode.cy = mode.height//2
            mode.app.setActiveMode(mode.app.overMode)
            return
        if(mode.playerNum > 1):
            mode.playerTwoCy += mode.playerTwoDy
            mode.checkPlayerTwoBounds()

        if(mode.playerOneLives == 0):
            mode.oneIsDead = True
            if(mode.playerNum == 2 and mode.twoIsDead):
                mode.isGameOver = True
            elif(mode.playerNum == 1):
                mode.isGameOver = True
        
        if(mode.playerNum == 2 and mode.playerTwoLives == 0):
            mode.twoIsDead = True
            if(mode.oneIsDead):
                mode.isGameOver = True

        mode.playerOneCy += mode.playerOneDy
        mode.checkPlayerOneBounds()
        mode.checkBulletBounds()
        mode.checkEnemyBounds()
        mode.checkBulletHits()
        mode.checkEnemyAttack()

        mode.birdPosition += 1
    
    def checkBulletBounds(mode):
        for bullet in Bullet.bullets:
            if bullet[0] <= 0:
                Bullet.bullets.remove(bullet)
            elif bullet[0] >= mode.width:
                Bullet.bullets.remove(bullet)
            elif bullet[1] >= mode.height - 20:
                Bullet.bullets.remove(bullet)
    
    def checkPlayerOneBounds(mode):
        if(mode.playerOneCy + 50 >= mode.height):
            mode.playerOneCy = mode.height - 50
            mode.playerOneJumpCount = 0
            mode.oneIsJumping = False

        if(mode.playerOneCx - 20 <= 0):
            mode.playerOneCx = 20
        elif(mode.playerOneCx + 20 >= mode.width):
            mode.playerOneCx = mode.width - 20
    
    def checkPlayerTwoBounds(mode):
        if(mode.playerTwoCy + 50 >= mode.height):
            mode.playerTwoCy = mode.height - 50
            mode.playerTwoJumpCount = 0
            mode.twoIsJumping = False

        if(mode.playerTwoCx - 20 <= 0):
            mode.playerTwoCx = 20
        elif(mode.playerTwoCx + 20 >= mode.width):
            mode.playerTwoCx = mode.width - 20
    
    def checkEnemyBounds(mode):
        for enemy in Enemy.enemies:
            if(enemy[1] + 70 >= mode.height):
                enemy[5] = 0
                enemy[1] = mode.height - 70
    
    def getDistanceFromEnemyOne(mode):
        #The takeDataPoint value here determines whether or not we send the data to the dataCollection class.
        #This slows down the rate at which the enemy learns. Making it so the difficulty of the game progresses
        #as it is played more.

        takeDataPoint = random.randrange(100)
        if(takeDataPoint >= 90):
            for enemy in Enemy.enemies:
                if(mode.playerOneCx < enemy[0] and mode.oneIsFacingRight):
                    dataCollection(enemy[0] - mode.playerOneCx)
                elif(mode.playerOneCx > enemy[0] and mode.oneIsFacingRight == False):
                    dataCollection(mode.playerOneCx - enemy[0])

    def getDistanceFromEnemyTwo(mode):
        takeDataPoint = random.randrange(100)
        if(takeDataPoint >= 90):
            for enemy in Enemy.enemies:
                if(mode.playertwoCx < enemy[0] and mode.twoIsFacingRight):
                    dataCollection(enemy[0] - mode.playerTwoCx)
                elif(mode.playerTwoCx > enemy [0] and mode.twoIsFacingRight == False):
                    dataCollection(mode.playerTwoCx - enemy[0])


    def checkBulletHits(mode):
        #bullet[0]=cx , bullet[1]=cy
        for enemy in Enemy.enemies:
            for bullet in Bullet.bullets:
                if(bullet[0] > enemy[0]-20 and bullet[0] < enemy[0] + 20 \
                    and bullet[1] < enemy[1] + 40 and bullet[1] > enemy[1] - 35):
                    enemy[4] -= 2
                    Bullet.bullets.remove(bullet)
    
    def checkEnemyAttack(mode):
        for enemy in Enemy.enemies:
            if(abs(enemy[0] - mode.playerOneCx) < 40 and enemy[1] + 10 < mode.playerOneCy):
                mode.playerOneHp -= 2
                if(mode.playerOneHp <= 0):
                    mode.playerOneLives -= 1
                    mode.playerOneHp = 100
                mode.onStreak = False
                mode.streak = 0
            
            if(mode.playerNum > 1):
                if(abs(enemy[0] - mode.playerTwoCx) < 40 and enemy[1] + 10 < mode.playerTwoCy):
                    mode.playerTwoHp -= 2
                    if(mode.playerTwoHp < 0):
                        mode.playerTwoLives -= 1
                        mode.playerTwoHp = 100
                    mode.onStreak = False
                    mode.streak = 0

    def drawWorld(mode, canvas):
        pass

    def drawBackground(mode, canvas):
        instructions = '''\t  Press [Right / d] to go right\n
                    Press [Left / a] to go left\n
                    Press [Up / w] to jump\n
                    Press [Space / Tab] to shoot enemy players'''
        canvas.create_image(mode.width//2, mode.height//2 + 32, image = ImageTk.PhotoImage(mode.backgroundImage))
        canvas.create_text(mode.width//2, mode.height//2 - mode.height//4, text = 'Tutorial Mode',\
            font = 'System 30 bold', fill = 'white')
        canvas.create_text(mode.width//2, mode.height//2, text = instructions,\
            font = 'System 15 bold', fill = 'white')

    def drawBirds(mode, canvas):
        if(mode.birdPosition > 2):
            mode.birdPosition = 0
        if(mode.createBird and len(mode.birds) < 5):
            mode.birds += [Bird(mode.width + 10, 50, random.randrange(3, 5))]
        for bird in  mode.birds:
            if(mode.birdPosition == 0):
                 canvas.create_image(bird.cx, bird.cy, image = ImageTk.PhotoImage(mode.birdFlying[0]))
            elif(mode.birdPosition == 1):
                 canvas.create_image(bird.cx, bird.cy, image = ImageTk.PhotoImage(mode.birdFlying[1]))
            elif(mode.birdPosition == 2):
                 canvas.create_image(bird.cx, bird.cy, image = ImageTk.PhotoImage(mode.birdFlying[0]))
    
    def drawPlayers(mode, canvas):
        if (mode.playerNum == 1 and not mode.oneIsDead):
            canvas.create_image(mode.playerOneCx, mode.playerOneCy, image = ImageTk.PhotoImage(mode.currPlayerOneModel))
        elif (mode.playerNum == 2 and not mode.twoIsDead):
            canvas.create_image(mode.playerOneCx, mode.playerOneCy, image = ImageTk.PhotoImage(mode.currPlayerOneModel))
            canvas.create_image(mode.playerTwoCx, mode.playerTwoCy, image = ImageTk.PhotoImage(mode.currPlayerTwoModel))
    
    def drawPlayerIdentifiers(mode, canvas):
        if(mode.playerNum == 1 and not mode.oneIsDead):
            canvas.create_oval(mode.playerOneCx - 5, mode.playerOneCy - 60, mode.playerOneCx + 5,\
                mode.playerOneCy - 50, fill = mode.playerOneColor, outline = 'white', width = 2)
        elif(mode.playerNum == 2 and not mode.twoIsDead):
            canvas.create_oval(mode.playerOneCx - 5, mode.playerOneCy - 60, mode.playerOneCx + 5,\
                mode.playerOneCy - 50, fill = mode.playerOneColor, outline = 'white', width = 2)
            canvas.create_oval(mode.playerTwoCx - 5, mode.playerTwoCy - 60, mode.playerTwoCx + 5,\
                mode.playerTwoCy - 50, fill = mode.playerTwoColor, outline = 'white', width = 2)
    
    def drawEnemies(mode, canvas):
        #mode.enemyWalkingRightAnimation
        for enemy in Enemy.enemies:
            if(enemy[3]):
                mode.currEnemyModel = mode.enemyWalkingRightAnimation[enemy[2] % 3]
            else:
                mode.currEnemyModel = mode.enemyWalkingLeftAnimation[enemy[2] % 3]
            canvas.create_image(enemy[0], enemy[1], image = ImageTk.PhotoImage(mode.currEnemyModel))
    
    #Draw Bullets
    def drawProjectiles(mode, canvas):
        for bullet in Bullet.bullets:
            canvas.create_oval(bullet[0] - mode.bulletRadius, bullet[1] - mode.bulletRadius,\
                bullet[0] + mode.bulletRadius, bullet[1] + mode.bulletRadius, fill = bullet[2],\
                    outline = 'black')
    
    def drawScore(mode, canvas):
        canvas.create_text(mode.width//2, 35, text = f'Score: {mode.score}', fill = 'white', font = 'System 20')
    
    def drawHp(mode, canvas):
        canvas.create_rectangle(20, 10, 120, 30, fill = None, outline = 'white')
        canvas.create_rectangle(20, 12, 20 + mode.playerOneHp, 28, fill = mode.playerOneColor)

        if(mode.playerNum == 2):
            canvas.create_rectangle(mode.width - 120, 10, mode.width - 20, 30, fill = None, outline = 'white')
            canvas.create_rectangle(mode.width - (mode.playerTwoHp + 20) , 12, mode.width - 20, 28, fill = mode.playerTwoColor)

    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'grey15')
        mode.drawBackground(canvas)
        canvas.create_rectangle(0, 475, mode.width, mode.height, fill = 'black')
        mode.drawScore(canvas)
        mode.drawHp(canvas)
        mode.drawBirds(canvas)
        mode.drawPlayers(canvas)
        mode.drawPlayerIdentifiers(canvas)
        mode.drawEnemies(canvas)
        mode.drawProjectiles(canvas)

class TitleScreenMode(Mode):
    scoresViewable = False

    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
        mode.titleImage = mode.loadImage('LimboTitle.png')
        mode.displayImages = [mode.loadImage('TitleScreen.png'), mode.loadImage('TitleScreen2.png')]
        mode.displayImagesTwo = [mode.loadImage('TitleScreenLeft.png'), mode.loadImage('TitleScreenLeft2.png')]

        mode.sadLock = mode.scaleImage(mode.loadImage('sadLock.png'), .15)
        mode.happyLock = mode.scaleImage(mode.loadImage('happyLock.png'), .15)

        mode.currImage = mode.displayImages[1]
        mode.currImageTwo = mode.displayImagesTwo[1]
        mode.display = mode.scaleImage(mode.currImage, .25)
        mode.displayTwo = mode.scaleImage(mode.currImageTwo, .25)
        mode.buttonOne = mode.scaleImage(mode.loadImage('onePlayer.png'), .4)
        mode.buttonTwo = mode.scaleImage(mode.loadImage('twoPlayer.png'), .4)
        mode.buttonOneRed = mode.scaleImage(mode.loadImage('onePlayerRed.png'), .4)
        mode.buttonTwoRed = mode.scaleImage(mode.loadImage('twoPlayerRed.png'), .4)
        mode.isButtonOneClicked = True
        mode.isButtonTwoClicked = False

        mode.isTwoPlayer = False
        mode.isOnePlayer = True

    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX >= 300 and clickX <= 400):
            if(clickY >= 200 and clickY <= 250):
                if(mode.isOnePlayer):
                    mode.app.setActiveMode(mode.app.playerDesignModeOne)
                elif(mode.isTwoPlayer):
                    mode.app.setActiveMode(mode.app.playerDesignModeTwo)
            elif(clickY >= 275 and clickY <= 325):
                mode.app.setActiveMode(mode.app.helpMode)
            elif(clickY >= 350 and clickY <= 400 and TitleScreenMode.scoresViewable):
                mode.app.setActiveMode(mode.app.highScores)
            elif(clickY >= 425 and clickY <= 475):
                mode.app.setActiveMode(mode.app.wallOfFame)
        if(clickY > mode.cy - 25 and clickY < mode.cy + 25):
            if(clickX > mode.cx - 175 and clickX < mode.cx - 125):
                mode.isButtonOneClicked = True
                mode.isOnePlayer = True
                mode.isTwoPlayer = False
                mode.isButtonTwoClicked = False
            elif(clickX > mode.cx + 125 and clickX < mode.cx + 175):
                mode.isButtonTwoClicked = True
                mode.isButtonOneClicked = False
                mode.isTwoPlayer = True
                mode.isOnePlayer = False

    def timerFired(mode):
        mode.currImage = mode.displayImages[1]
        mode.currImageTwo = mode.displayImagesTwo[1]
        changeScreen = random.randrange(100)
        if(changeScreen > 95):
            mode.currImage = mode.displayImages[0]
            mode.currImageTwo = mode.displayImagesTwo[0]
        mode.display = mode.scaleImage(mode.currImage, .5)
        mode.displayTwo = mode.scaleImage(mode.currImageTwo, .5)
    
    def drawPlayerButtons(mode, canvas):
        if(mode.isButtonOneClicked == False):
            canvas.create_image(mode.cx - 150, mode.cy, image = ImageTk.PhotoImage(mode.buttonOne))
        if(mode.isButtonTwoClicked == False):
            canvas.create_image(mode.cx + 150, mode.cy, image = ImageTk.PhotoImage(mode.buttonTwo))
        if(mode.isButtonOneClicked == True):
            canvas.create_image(mode.cx - 150, mode.cy, image = ImageTk.PhotoImage(mode.buttonOneRed))
        if(mode.isButtonTwoClicked == True):
            canvas.create_image(mode.cx + 150, mode.cy, image = ImageTk.PhotoImage(mode.buttonTwoRed))
    
    def drawPlayersOnScreen(mode, canvas):
        if(mode.isTwoPlayer):
            canvas.create_image(100, 400, image = ImageTk.PhotoImage(mode.display))
            canvas.create_line(100, 447, 200, 447, fill = 'white')
            canvas.create_image(600, 400, image = ImageTk.PhotoImage(mode.displayTwo))
            canvas.create_line(600, 447, 500, 447, fill = 'white')
        else:
            canvas.create_image(100, 400, image = ImageTk.PhotoImage(mode.display))
            canvas.create_line(100, 447, 200, 447, fill = 'white')
    
    def drawLock(mode, canvas):
        if(TitleScreenMode.scoresViewable):
            canvas.create_image(280, 375, image = ImageTk.PhotoImage(mode.happyLock))
        else:
            canvas.create_image(280, 375, image = ImageTk.PhotoImage(mode.sadLock))

    
    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = "black")
        mode.drawPlayerButtons(canvas)
        mode.drawPlayersOnScreen(canvas)
        mode.drawLock(canvas)
        canvas.create_image(mode.cx, mode.cy - mode.cy//2, image = ImageTk.PhotoImage(mode.titleImage))
        canvas.create_text(mode.cx, mode.cy - mode.cy//3 - 10, text = '8-bit Version', fill = 'white',\
            font = 'System 2')
        canvas.create_polygon(300, 200, 300, 250, 400, 250, 400, 200, fill = "grey", outline = 'black', smooth = 1)
        canvas.create_polygon(300, 275, 300, 325, 400, 325, 400, 275, fill = "grey", outline = 'black', smooth = 1)
        canvas.create_polygon(300, 350, 300, 400, 400, 400, 400, 350, fill = "grey", outline = 'black', smooth = 1)
        canvas.create_polygon(300, 425, 300, 475, 400, 475, 400, 425, fill = "grey", outline = 'black', smooth = 1)
        canvas.create_text(350, 225, text = 'Start Game', font = 'System 12', fill = 'black')
        canvas.create_text(350, 300, text = 'How To Play', font = 'System 12', fill = 'black')
        canvas.create_text(350, 375, text = 'High Scores', font = 'System 12', fill = 'black')
        canvas.create_text(350, 450, text = 'Wall Of Fame', font = 'System 12', fill = 'black')

class PlayerDesignModeOne(Mode):
    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
        mode.color1 = None
        mode.outlineBlue = 'black'
        mode.outlineMagenta = 'black'
        mode.outlineGreen = 'black'
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > mode.cx - 75 and clickX < mode.cx + 75):
            if(clickY > mode.height - 100 and clickY < mode.height - 50):
                player1 = Player(50, mode.height - 50, mode.color1)
                mode.color1 = None
                mode.app.setActiveMode(mode.app.tutorialMode)
        if(clickX > 35 and clickX < 115):
            if(clickY > mode.height-50 and clickY < mode.height-25):
                mode.app.setActiveMode(mode.app.titleScreenMode)
        #blue circle
        if(clickX > mode.cx - mode.cx//2 + 110 and clickX < mode.cx - mode.cx//2 + 130):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'blue'
                mode.outlineBlue = 'white'
                mode.outlineMagenta = 'black'
                mode.outlineGreen = 'black'
        
        #green circle
        if(clickX > mode.cx - mode.cx//2 + 150 and clickX < mode.cx - mode.cx//2 + 170):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'green2'
                mode.outlineGreen = 'white'
                mode.outlineBlue = 'black'
                mode.outlineMagenta = 'black'
        
        #magenta circle
        if(clickX > mode.cx - mode.cx//2 + 190 and clickX < mode.cx - mode.cx//2 + 210):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'magenta'
                mode.outlineMagenta = 'white'
                mode.outlineBlue = 'black'
                mode.outlineGreen = 'black'

    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'black')
        canvas.create_text(mode.cx - mode.cx//2, mode.cy - mode.cy//2 + 50, text = 'Choose Player Color:',\
            fill = 'white', font = '20')
        canvas.create_oval(mode.cx - mode.cx//2 + 110, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 130,\
            mode.cy - mode.cy//2 + 60, fill = 'blue', outline = mode.outlineBlue, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 150, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 170,\
            mode.cy - mode.cy//2 + 60, fill = 'green2', outline = mode.outlineGreen, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 190, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 210,\
            mode.cy - mode.cy//2 + 60, fill = 'magenta', outline = mode.outlineMagenta, width = 4)
        canvas.create_rectangle(mode.cx - 75, mode.height - 100, mode.cx + 75,\
            mode.height - 50, fill = 'dark grey', outline = 'white')
        canvas.create_text(mode.cx, mode.height - 75, text = 'Begin', fill = 'black', font = 'System 24 italic')
        canvas.create_rectangle(35, mode.height-50, 115, mode.height-25, fill = 'red',\
            outline = 'white')
        canvas.create_text(75, mode.height - 37.5, text = 'Main Menu', fill = 'black',\
            font = 'System 10 bold')

class PlayerDesignModeTwo(Mode):
    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
        mode.color1 = None
        mode.color2 = None
        mode.outlineBlue = 'black'
        mode.outlineMagenta = 'black'
        mode.outlineGreen = 'black'

        mode.outlineBlueTwo = 'black'
        mode.outlineMagentaTwo = 'black'
        mode.outlineGreenTwo = 'black'
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > mode.cx - 75 and clickX < mode.cx + 75):
            if(clickY > mode.height - 100 and clickY < mode.height - 50):
                player1 = Player(50, mode.height - 30, mode.color1)
                player2 = Player(30, mode.height - 30, mode.color2)
                mode.app.setActiveMode(mode.app.tutorialMode)
        if(clickX > 35 and clickX < 115):
            if(clickY > mode.height-50 and clickY < mode.height-25):
                mode.app.setActiveMode(mode.app.titleScreenMode)
        #blue circle
        if(clickX > mode.cx - mode.cx//2 + 110 and clickX < mode.cx - mode.cx//2 + 130):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'blue'
                mode.outlineBlue = 'white'
                mode.outlineMagenta = 'black'
                mode.outlineGreen = 'black'
        
        #green circle
        if(clickX > mode.cx - mode.cx//2 + 150 and clickX < mode.cx - mode.cx//2 + 170):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'green2'
                mode.outlineGreen = 'white'
                mode.outlineBlue = 'black'
                mode.outlineMagenta = 'black'
        
        #magenta circle
        if(clickX > mode.cx - mode.cx//2 + 190 and clickX < mode.cx - mode.cx//2 + 210):
            if(clickY > mode.cy - mode.cy//2 + 40 and clickY < mode.cy - mode.cy//2 + 60):
                mode.color1 = 'magenta'
                mode.outlineMagenta = 'white'
                mode.outlineBlue = 'black'
                mode.outlineGreen = 'black'
        
        #blue circle two
        if(clickX > mode.cx - mode.cx//2 + 110 and clickX < mode.cx - mode.cx//2 + 130):
            if(clickY > mode.cy + 40 and clickY < mode.cy + 60):
                mode.color2 = 'blue'
                mode.outlineBlueTwo = 'white'
                mode.outlineMagentaTwo = 'black'
                mode.outlineGreenTwo = 'black'
        
        #green circle two
        if(clickX > mode.cx - mode.cx//2 + 150 and clickX < mode.cx - mode.cx//2 + 170):
            if(clickY > mode.cy + 40 and clickY < mode.cy + 60):
                mode.color2 = 'green2'
                mode.outlineGreenTwo = 'white'
                mode.outlineBlueTwo = 'black'
                mode.outlineMagentaTwo = 'black'
        
        #magenta circle two
        if(clickX > mode.cx - mode.cx//2 + 190 and clickX < mode.cx - mode.cx//2 + 210):
            if(clickY > mode.cy + 40 and clickY < mode.cy + 60):
                mode.color2 = 'magenta'
                mode.outlineMagentaTwo = 'white'
                mode.outlineBlueTwo = 'black'
                mode.outlineGreenTwo = 'black'

    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'black')

        #Player 1
        canvas.create_text(mode.cx - mode.cx//2, mode.cy - mode.cy//2 + 50, text = 'Choose Player Color:',\
            fill = 'white', font = '20')
        canvas.create_oval(mode.cx - mode.cx//2 + 110, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 130,\
            mode.cy - mode.cy//2 + 60, fill = 'blue', outline = mode.outlineBlue, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 150, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 170,\
            mode.cy - mode.cy//2 + 60, fill = 'green2', outline = mode.outlineGreen, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 190, mode.cy - mode.cy//2 + 40, mode.cx - mode.cx//2 + 210,\
            mode.cy - mode.cy//2 + 60, fill = 'magenta', outline = mode.outlineMagenta, width = 4)

        #Player Two
        canvas.create_text(mode.cx - mode.cx//2, mode.cy + 50, text = 'Choose Player Color:',\
            fill = 'white', font = '20')
        canvas.create_oval(mode.cx - mode.cx//2 + 110, mode.cy + 40, mode.cx - mode.cx//2 + 130,\
            mode.cy + 60, fill = 'blue', outline = mode.outlineBlueTwo, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 150, mode.cy + 40, mode.cx - mode.cx//2 + 170,\
            mode.cy + 60, fill = 'green2', outline = mode.outlineGreenTwo, width = 4)
        canvas.create_oval(mode.cx - mode.cx//2 + 190, mode.cy + 40, mode.cx - mode.cx//2 + 210,\
            mode.cy + 60, fill = 'magenta', outline = mode.outlineMagentaTwo, width = 4)


        canvas.create_rectangle(mode.cx - 75, mode.height - 100, mode.cx + 75,\
            mode.height - 50, fill = 'dark grey', outline = 'white')
        canvas.create_text(mode.cx, mode.height - 75, text = 'Begin', fill = 'black', font = 'System 24 italic')
        canvas.create_rectangle(35, mode.height-50, 115, mode.height-25, fill = 'red',\
            outline = 'white')
        canvas.create_text(75, mode.height - 37.5, text = 'Main Menu', fill = 'black',\
            font = 'System 10 bold')


'''
class WallOfFameMode(Mode):
    def appStarted(mode):
    def mousePressed(mode):
    
    def keyPressed(mode):
    
    def timerFired(mode):
    
    def drawPlayer(mode):
    
    def redrawAll(mode):
'''
#This code makes use of JSON which is a way of storing data in a file
#or in this case on a website (source) to be accessible for future references.
#The use of json was mde possible by lessons from:

#https://www.w3schools.com/python/python_json.asp

#While no code was take directly, I only found it fair to cite the source of
#knowledge since it was not covered in 15-112.

class HighScoresMode(Mode):
    def appStarted(mode):
        url = 'https://api.myjson.com/bins/zrkyi'
        source = requests.get(url)
        data = json.loads(source.text)
        data.update({Team.teamNames : Score.score})
        headers = {'Content-Type':'application/json'}
        requests.put(url, data = json.dumps(data), headers = headers)

        mode.cx, mode.cy = mode.width//2, mode.height//2
        mode.topScore = 0
        mode.topPlayer = ''

        mode.secondScore = 3
        mode.secondPlayer = ''

        mode.thirdScore = 1
        mode.thirdPlayer = ''

        items = data.items()
        for item in items:
            if item[1] > mode.topScore:
                mode.secondPlayer = mode.topPlayer
                mode.secondScore = mode.topScore
                mode.topPlayer = item[0]
                mode.topScore = item[1]
            if item[1] < mode.topScore and item[1] > mode.secondScore:
                mode.thirdPlayer = mode.secondPlayer
                mode.thirdScore = mode.secondScore
                mode.secondPlayer = item[0]
                mode.secondScore = item[1]
            if item[1] < mode.secondScore and item[1] > mode.thirdScore:
                mode.thirdPlayer = item[0]
                mode.thirdScore = item[1]
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > 35 and clickX < 115):
            if(clickY > mode.height-50 and clickY < mode.height-25):
                mode.app.setActiveMode(mode.app.titleScreenMode)
    
    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'black')
        canvas.create_text(mode.cx, mode.cy - mode.cy//2 - 75, text = 'High Scores', fill = "white",\
            font = 'System 30 bold')
        canvas.create_text(mode.cx - mode.cx//2, 150, text = '1.', fill = "white",\
            font = 'System 25 bold')
        canvas.create_text(mode.cx, 150, text = mode.topPlayer, fill = 'white', font = 'System 30')
        canvas.create_text(mode.cx + mode.cx//2, 150, text = mode.topScore, fill = 'white', font = 'System 30')


        canvas.create_text(mode.cx - mode.cx//2, 225, text = '2.', fill = "white",\
            font = 'System 25 bold')
        canvas.create_text(mode.cx, 225, text = mode.secondPlayer, fill = 'white', font = 'System 30')
        canvas.create_text(mode.cx + mode.cx//2, 225, text = mode.secondScore, fill = 'white', font = 'System 30')

        canvas.create_text(mode.cx - mode.cx//2, 300, text = '3.', fill = "white",\
            font = 'System 25 bold')
        canvas.create_text(mode.cx, 300, text = mode.thirdPlayer, fill = 'white', font = 'System 30')
        canvas.create_text(mode.cx + mode.cx//2, 300, text = mode.thirdScore, fill = 'white', font = 'System 30')

        canvas.create_rectangle(35, mode.height-50, 115, mode.height-25, fill = 'red',\
            outline = 'white')
        canvas.create_text(75, mode.height - 37.5, text = 'Main Menu', fill = 'black',\
            font = 'System 10 bold')

class GameOverMode(Mode):
    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > mode.cx-50 and clickX < mode.cx+50):
            if(clickY > mode.cy-25 and clickY < mode.cy+25):
                mode.app.setActiveMode(mode.app.highScores)

    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'black')
        canvas.create_text(mode.cx, mode.cy - mode.cy//2, text = "Game Over",\
            font = 'System 30 bold', fill ='red')
        canvas.create_rectangle(mode.cx - 50, mode.cy - 25, mode.cx + 50, mode.cy + 25, fill = 'red',\
            outline = 'white')
        canvas.create_text(mode.cx, mode.cy, text = 'View Scores', fill = 'white',\
            font = 'System 10')
'''
class CutScreen(Mode):
    def appStarted(mode):

    def keyPressed(mode):
    
    def timerFired(mode):
    
    def redrawAll(mode):
'''
class InstructionsMode(Mode):
    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
        mode.upKey = mode.scaleImage(mode.loadImage('UpKey.png'), .5)
        mode.rightKey = mode.scaleImage(mode.loadImage('RightKey.png'), .5)
        mode.leftKey = mode.scaleImage(mode.loadImage('LeftKey.png'), .5)
        mode.spaceBar = mode.scaleImage(mode.loadImage('SpaceBar.png'), .5)
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > 50 and clickX < 100):
            if(clickY > mode.height-50 and clickY < mode.height-25):
                mode.app.setActiveMode(mode.app.titleScreenMode)
    
    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'black')
        canvas.create_text(mode.cx, mode.cy - mode.cy//2 - 75, text = 'Instructions:', fill = "white",\
            font = 'System 30 bold')
        canvas.create_rectangle(35, mode.height-50, 115, mode.height-25, fill = 'red',\
            outline = 'white')
        canvas.create_text(75, mode.height - 37.5, text = 'Main Menu', fill = 'black',\
            font = 'System 10 bold')
        canvas.create_image(mode.cx - mode.cx//2 + 50, 150, image = ImageTk.PhotoImage(mode.upKey))
        canvas.create_image(mode.cx - mode.cx//2 + 50, 225, image = ImageTk.PhotoImage(mode.rightKey))
        canvas.create_image(mode.cx - mode.cx//2 + 50, 300, image = ImageTk.PhotoImage(mode.leftKey))
        canvas.create_image(mode.cx - mode.cx//2 + 50, 375, image = ImageTk.PhotoImage(mode.spaceBar))
        canvas.create_text(mode.cx, 150, text = 'Press Up to jump',\
            font = 'System 12', fill = 'white')
        canvas.create_text(mode.cx + 25, 225, text = 'Press Right to move the player right',\
            font = 'System 12', fill = 'white')
        canvas.create_text(mode.cx + 25, 300, text = 'Press Left to move the player right',\
            font = 'System 12', fill = 'white')
        canvas.create_text(mode.cx + 50, 375, text = 'Press Space to shoot enemies',\
            font = 'System 12', fill = 'white')

class PauseMenuMode(Mode):
    def appStarted(mode):
        mode.cx, mode.cy = mode.width//2, mode.height//2
    
    def keyPressed(mode, event):
        if(event.key == 'p'):
            mode.app.setActiveMode(mode.app.tutorialMode)
    
    def mousePressed(mode, event):
        clickX, clickY = event.x, event.y
        if(clickX > mode.cx - mode.cx // 4 and clickX < mode.cx + mode.cx // 4):
            if(clickY > mode.cy - 15 and clickY < mode.cy + 15):
                mode.app.setActiveMode(mode.app.tutorialMode)
        if(clickX > 50 and clickX < 100):
            if(clickY > mode.height-50 and clickY < mode.height-25):
                mode.app.setActiveMode(mode.app.titleScreenMode)
    
    def redrawAll(mode, canvas):
        canvas.create_rectangle(0, 0, mode.width, mode.height, fill = 'grey15')
        canvas.create_text(mode.cx, mode.cy - mode.cy//2 - 75, text = 'PAUSED', fill = "black",\
            font = 'System 30 bold')
        canvas.create_rectangle(mode.cx - mode.cx//4, mode.cy - 15, mode.cx + mode.cx//4,\
            mode.cy + 15, fill = 'red', outline = 'black')
        canvas.create_text(mode.cx, mode.cy, text = 'Resume', fill = 'black', font = 'System 20 italic')
        canvas.create_rectangle(35, mode.height-50, 115, mode.height-25, fill = 'red',\
            outline = 'white')
        canvas.create_text(75, mode.height - 37.5, text = 'Main Menu', fill = 'black',\
            font = 'System 10 bold')


'''
class WinMode(Mode):
    def appStarted(mode):
'''
class MyModalApp(ModalApp):
    def appStarted(app):
        app.titleScreenMode = TitleScreenMode()
        app.overMode = GameOverMode()
        #app.gameMode = GameMode()
        app.tutorialMode = TutorialMode()
        app.helpMode = InstructionsMode()
        app.playerDesignModeOne = PlayerDesignModeOne()
        app.playerDesignModeTwo = PlayerDesignModeTwo()
        #app.winningMode = WinMode()
        app.pauseMode = PauseMenuMode()
        #app.cutSCreen = CutScreenMode()
        app.highScores = HighScoresMode()
        #app.wallOfFame = WallOfFameMode()
        app.setActiveMode(app.titleScreenMode)
        app.timerDelay = 20

LoginInfo()

if(LoginInfo.proceed):
    app = MyModalApp(width=700, height=500)


